{{>index-top}}
<h1>챌린지 등록</h1>
<div class="col-md-12">
    <div class="col-md-8">
        <form>
            <div class="form-group m-3">
                <label for="title">제목</label>
                <input type="text" class="form-control" id="title" placeholder="제목을 입력하세요">
            </div>
            <div class="form-group m-3">
                <label for="summary"> 챌린지 요약 </label>
                <input type="text" class="form-control" id="summary" placeholder="작성자를 입력하세요">
            </div>
            <div class="form-group m-3">
                <label for="content"> 챌린지 설명 </label>
                <textarea class="form-control" style="height: 300px" id="description"
                          placeholder="내용을 입력하세요"></textarea>
            </div>

            <div class="form-group m-3">
                <label for="method">인증방법</label>
                <input type="text" class="method" id="method" name="frequency">
            </div>
            <div class="form-group m-3">
                <label for="method">인증빈도</label>
                <input type="number" class="frequency" id="frequency" name="frequency">
            </div>

            <div class="form-group m-3">
                <label for="max">참가 최대 인원</label>
                <input type="number" class="max" id="max">
            </div>
            <div class="form-group m-3">
                <label for="start">챌린지 시작 시간</label>
                <input type="datetime-local" id="startDate" class="start" name="start">
            </div>
            <div class="form-group m-3">
                <labe for="end">챌린지 종료 시간</label>
                    <input type="datetime-local" id="endDate" class="end">
            </div>
            <div class="form-group m-3">
                <label for="InputSubject1">파일첨부</label>
                <input multiple name="files" id="fileInput" type="file" data-class-button="btn btn-default"
                       data-class-input="form-control"
                       data-button-text="" data-icon-name="fa fa-upload" class="form-control" tabindex="-1"
                       style="position: absolute; clip: rect(0px 0px 0px 0px);">
                <div class="bootstrap-filestyle input-group">
                    <input type="text" id="userfile" class="form-control" name="userfile" disabled="">
                    <span class="group-span-filestyle input-group-btn" tabindex="0">
                            <label for="fileInput" class="btn btn-default">
                              <span class="glyphicon fa fa-upload"></span>
                            </label>
                          </span>
                </div>
            </div>
            <div id="image_container" style="text-align: center;"></div>
        </form>
        <div align="right">
            <a href="/" role="button" class="btn btn-secondary">취소</a>
            <button type="submit" class="btn btn-primary" id="btn-save">등록</button>
        </div>
    </div>
</div>
{{>index-bottom}}
<script>
    var uploadFile;
    $(document).ready(function () {
      var reader = new FileReader();
      $("#fileInput").on("change", (e) => {
        var filename = e.target.files[0].name;
        var file = e.target.files[0];
        reader.onload = (e) => {
          var img = document.createElement("img");
          img.setAttribute("src", e.target.result);
          img.setAttribute("style", "width: 150px; height: 150px;");
          img.setAttribute("class", "auto");
          document.querySelector("div#image_container").appendChild(img);
          uploadFile = file;
        };
        reader.readAsDataURL(file);
        $("#userfile").val(filename);
      });
    });
</script>